var countries = {
    "Albania":0.825,
    "Algeria":0.756,
    "Angola":0.404,
    "Argentina":0.511,
    "Armenia":0.681,
    "Australia":0.657,
    "Austria":0.584,
    "Azerbaijan":0.745,
    "Bahrain":0.787,
    "Bangladesh":0.535,
    "Barbados":0.711,
    "Belgium":0.713,
    "Benin":0.731,
    "Bhutan":0.776,
    "Bolivia":0.489,
    "Bosnia and Herzegovina":0.604,
    "Botswana":0.723,
    "Brazil":0.498,
    "Brunei Darussalam":0.787,
    "Bulgaria":0.604,
    "Burkina Faso":0.662,
    "Burundi":0.837,
    "Cambodia":0.762,
    "Cameroon":0.674,
    "Canada":0.651,
    "Cape Verde":0.672,
    "Chad":0.610,
    "Chile":0.482,
    "China":0.649,
    "Colombia":0.576,
    "Costa Rica":0.553,
    "Cote d'Ivoire":0.595,
    "Croatia":0.555,
    "Cyprus":0.570,
    "Czech Republic":0.564,
    "Denmark":0.734,
    "Dominican Republic":0.570,
    "Ecuador":0.604,
    "Egypt":0.764,
    "El Salvador":0.536,
    "Estonia":0.644,
    "Ethiopia":0.571,
    "Finland":0.799,
    "France":0.475,
    "Gambia, The":0.772,
    "Georgia":0.722,
    "Germany":0.591,
    "Ghana":0.750,
    "Greece":0.626,
    "Guatemala":0.588,
    "Honduras":0.624,
    "Hungary":0.495,
    "Iceland":0.789,
    "India":0.573,
    "Indonesia":0.681,
    "Iran, Islamic Rep.":0.579,
    "Ireland":0.706,
    "Israel":0.564,
    "Italy":0.511,
    "Jamaica":0.628,
    "Japan":0.662,
    "Jordan":0.636,
    "Kazakhstan":0.725,
    "Kenya":0.651,
    "Korea, Rep.":0.524,
    "Kuwait":0.647,
    "Kyrgyz Republic":0.710,
    "Lao PDR":0.767,
    "Latvia":0.667,
    "Lebanon":0.611,
    "Lesotho":0.553,
    "Liberia":0.546,
    "Lithuania":0.616,
    "Luxembourg":0.710,
    "Macedonia, FYR":0.723,
    "Madagascar":0.631,
    "Malawi":0.695,
    "Malaysia":0.791,
    "Mali":0.672,
    "Malta":0.682,
    "Mauritania":0.570,
    "Mauritius":0.625,
    "Mexico":0.507,
    "Moldova":0.691,
    "Mongolia":0.741,
    "Montenegro":0.642,
    "Morocco":0.535,
    "Mozambique":0.629,
    "Namibia":0.653,
    "Nepal":0.591,
    "Netherlands":0.683,
    "New Zealand":0.754,
    "Nicaragua":0.573,
    "Nigeria":0.752,
    "Norway":0.806,
    "Oman":0.753,
    "Pakistan":0.555,
    "Panama":0.637,
    "Paraguay":0.554,
    "Peru":0.490,
    "Philippines":0.798,
    "Poland":0.531,
    "Portugal":0.590,
    "Qatar":0.794,
    "Romania":0.656,
    "Rwanda":0.877,
    "Russian Federation":0.653,
    "Saudi Arabia":0.569,
    "Senegal":0.705,
    "Serbia":0.609,
    "Singapore":0.810,
    "Slovak Republic":0.536,
    "Slovenia":0.698,
    "South Africa":0.619,
    "Spain":0.550,
    "Sri Lanka":0.686,
    "Swazliand":0.653,
    "Sweden":0.715,
    "Switzerland":0.700,
    "Tajikistan":0.759,
    "Tanzania":0.655,
    "Thailand":0.771,
    "Trinidad and Tobago":0.636,
    "Turkey":0.590,
    "Uganda":0.770,
    "Ukraine":0.660,
    "United Arab Emirates":0.797,
    "United Kingdom":0.675,
    "United States":0.653,
    "Uruguay":0.557,
    "Venezuela":0.650,
    "Vietnam":0.636,
    "Yemen":0.635,
    "Zimbabwe":0.715,
}
$(function() {
    $("#country_selector").countrySelect({
        defaultCountry: "ar",
        preferredCountries: [],
    });
    function getWomenRate() {
        var name = $("#country_selector").countrySelect('getSelectedCountryData').name.replace(/\s+\(.+\)/, '');
        return countries[name];
    }
    function showAmounts() {
        var amount_men = "", amount_women = "";
        var women_rate = getWomenRate();
        if (women_rate) {
            var num_men = parseInt($('#num_men').val(), 10) || 0;
            var num_women = parseInt($('#num_women').val(), 10) || 0;
            var amount = parseInt($('#amount').val(), 10) || 0;
            var total_rate = num_men + num_women * women_rate;
            amount_men = num_men > 0 ? Math.round(amount / total_rate * 100) / 100 : 0;
            amount_women = num_women > 0 ? Math.round(amount / total_rate * women_rate * 100) / 100 : 0;
        }
        $('#amount_men').text(amount_men);
        $('#amount_women').text(amount_women);
    }
    $(document).on('change keyup paste', "#country_selector_code, #amount, #num_men, #num_women", showAmounts);
    showAmounts();
});
